<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Alpine.js Button Example</title>
    <link rel="stylesheet" href="/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  </head>
  <body>
    <main class="max-w-[80%] mx-auto">
      <h1 class="font-[500] text-[#434343] my-[30px] text-xl text-center">All Records</h1>

      <!-- Calendar -->
      <div class="mt-8">
        <h1 class="font-[500] my-4">History</h1>

        <div
          x-data="{
          datePickerOpen: true, // Set the calendar to always be open
          datePickerValue: '',
          datePickerFormat: 'M d, Y',
          datePickerMonth: '',
          datePickerYear: '',
          datePickerDay: '',
          datePickerDaysInMonth: [],
          datePickerBlankDaysInMonth: [],
          datePickerMonthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
          datePickerDays: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
          datePickerDayClicked(day) {
            let selectedDate = new Date(this.datePickerYear, this.datePickerMonth, day);
            this.datePickerDay = day;
            this.datePickerValue = this.datePickerFormatDate(selectedDate);
            this.datePickerIsSelectedDate(day);
            // Keep the calendar open after clicking a date
          },
          datePickerPreviousMonth(){
            if (this.datePickerMonth == 0) { 
                this.datePickerYear--; 
                this.datePickerMonth = 12; 
            } 
            this.datePickerMonth--;
            this.datePickerCalculateDays();
          },
          datePickerNextMonth(){
            if (this.datePickerMonth == 11) { 
                this.datePickerMonth = 0; 
                this.datePickerYear++; 
            } else { 
                this.datePickerMonth++; 
            }
            this.datePickerCalculateDays();
          },
          datePickerIsSelectedDate(day) {
            const d = new Date(this.datePickerYear, this.datePickerMonth, day);
            return this.datePickerValue === this.datePickerFormatDate(d) ? true : false;
          },
          datePickerIsToday(day) {
            const today = new Date();
            const d = new Date(this.datePickerYear, this.datePickerMonth, day);
            return today.toDateString() === d.toDateString() ? true : false;
          },
          datePickerCalculateDays() {
            let daysInMonth = new Date(this.datePickerYear, this.datePickerMonth + 1, 0).getDate();
            // find where to start calendar day of week
            let dayOfWeek = new Date(this.datePickerYear, this.datePickerMonth).getDay();
            let blankdaysArray = [];
            for (var i = 1; i <= dayOfWeek; i++) {
                blankdaysArray.push(i);
            }
            let daysArray = [];
            for (var i = 1; i <= daysInMonth; i++) {
                daysArray.push(i);
            }
            this.datePickerBlankDaysInMonth = blankdaysArray;
            this.datePickerDaysInMonth = daysArray;
          },
          datePickerFormatDate(date) {
            let formattedDay = this.datePickerDays[date.getDay()];
            let formattedDate = ('0' + date.getDate()).slice(-2); // appends 0 (zero) in single digit date
            let formattedMonth = this.datePickerMonthNames[date.getMonth()];
            let formattedMonthShortName = this.datePickerMonthNames[date.getMonth()].substring(0, 3);
            let formattedMonthInNumber = ('0' + (parseInt(date.getMonth()) + 1)).slice(-2);
            let formattedYear = date.getFullYear();
    
            if (this.datePickerFormat === 'M d, Y') {
              return `${formattedMonthShortName} ${formattedDate}, ${formattedYear}`;
            }
            if (this.datePickerFormat === 'MM-DD-YYYY') {
              return `${formattedMonthInNumber}-${formattedDate}-${formattedYear}`;
            }
            if (this.datePickerFormat === 'DD-MM-YYYY') {
              return `${formattedDate}-${formattedMonthInNumber}-${formattedYear}`;
            }
            if (this.datePickerFormat === 'YYYY-MM-DD') {
              return `${formattedYear}-${formattedMonthInNumber}-${formattedDate}`;
            }
            if (this.datePickerFormat === 'D d M, Y') {
              return `${formattedDay} ${formattedDate} ${formattedMonthShortName} ${formattedYear}`;
            }
            
            return `${formattedMonth} ${formattedDate}, ${formattedYear}`;
          },
        }"
          x-init="
            currentDate = new Date();
            if (datePickerValue) {
                currentDate = new Date(Date.parse(datePickerValue));
            }
            datePickerMonth = currentDate.getMonth();
            datePickerYear = currentDate.getFullYear();
            datePickerDay = currentDate.getDay();
            datePickerValue = datePickerFormatDate( currentDate );
            datePickerCalculateDays();
        "
          x-cloak
        >
          <div class="container px-4 py-2 mx-auto text-center">
            <div class="w-full flex justify-center">
              <div class="w-[17rem]">
                <div
                  class="max-w-lg p-4 antialiased bg-[#FFF7E2] border rounded-lg shadow w-[24rem] border-neutral-200/70"
                >
                  <div class="flex items-center justify-between mb-2">
                    <div>
                      <span
                        x-text="datePickerMonthNames[datePickerMonth]"
                        class="text-lg font-bold text-gray-800"
                      ></span>
                      <span
                        x-text="datePickerYear"
                        class="ml-1 text-lg font-normal text-gray-600"
                      ></span>
                    </div>
                    <div>
                      <button
                        @click="datePickerPreviousMonth()"
                        type="button"
                        class="inline-flex p-1 transition duration-100 ease-in-out rounded-full cursor-pointer focus:outline-none focus:shadow-outline hover:bg-gray-100"
                      >
                        <svg
                          class="inline-flex w-6 h-6 text-gray-400"
                          fill="none"
                          viewBox="0 0 24 24"
                          stroke="currentColor"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M15 19l-7-7 7-7"
                          />
                        </svg>
                      </button>
                      <button
                        @click="datePickerNextMonth()"
                        type="button"
                        class="inline-flex p-1 transition duration-100 ease-in-out rounded-full cursor-pointer focus:outline-none focus:shadow-outline hover:bg-gray-100"
                      >
                        <svg
                          class="inline-flex w-6 h-6 text-gray-400"
                          fill="none"
                          viewBox="0 0 24 24"
                          stroke="currentColor"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M9 5l7 7-7 7"
                          />
                        </svg>
                      </button>
                    </div>
                  </div>
                  <div class="grid grid-cols-7 my-8">
                    <template x-for="(day, index) in datePickerDays" :key="index">
                      <div class="px-0.5">
                        <div
                          x-text="day"
                          class="text-sm font-medium text-center text-gray-800"
                        ></div>
                      </div>
                    </template>
                  </div>
                  <div class="grid grid-cols-7">
                    <template x-for="blankDay in datePickerBlankDaysInMonth">
                      <div class="text-sm text-center border border-transparent"></div>
                    </template>
                    <template x-for="(day, dayIndex) in datePickerDaysInMonth" :key="dayIndex">
                      <div class="m-1">
                        <div
                          x-text="day"
                          @click="datePickerDayClicked(day)"
                          :class="{
                                            'bg-neutral-200': datePickerIsToday(day) == true, 
                                            'text-[#A0A0A0] hover:bg-neutral-200': datePickerIsToday(day) == false && datePickerIsSelectedDate(day) == false,
                                            'bg-[#3A643B] text-white hover:bg-opacity-75': datePickerIsSelectedDate(day) == true
                                        }"
                          class="flex items-center justify-center text-sm leading-none text-center rounded-full cursor-pointer h-7 w-7"
                        ></div>
                      </div>
                    </template>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Today Reminders -->

      <div class="mb-[100px]">
        <h1 class="font-[500] mt-8">Today Reminders</h1>

        <div class="flex flex-col">
          <div class="flex cursor-pointer items-center justify-between">
            <div class="flex gap-4 my-8">
              <img height="" width="" src="/assets/today-reminder.svg" class="w-18 h-18" alt="" />

              <div class="flex flex-col justify-center gap-4">
                <h1 class="text-[16px] font-[500]">Drinking Water.</h1>

                <div class="flex gap-6">
                  <h2 class="text-primaryGrey text-[13px]">Consumable</h2>
                  <div class="flex gap-3 items-center text-[13px]">
                    <img height="" width="" src="/assets/reminder-clock.svg" alt="" />
                    <h1>9:30 AM</h1>
                  </div>
                </div>
              </div>
            </div>

            <div class="flex gap-3 items-center">
              <h1 class="font-[600] text-xl">8 🌻</h1>

              <img height="" width="" src="/assets/right-arrow.svg" class="w-[18px]" alt="" />
            </div>
          </div>

          <div class="border"></div>

          <div class="flex cursor-pointer items-center justify-between">
            <div class="flex gap-4 my-8">
              <img height="" width="" src="/assets/today-reminder.svg" class="w-18 h-18" alt="" />

              <div class="flex flex-col justify-center gap-4">
                <h1 class="text-[16px] font-[500]">Amrutam Kuntal Care Hair...</h1>

                <div class="flex gap-6">
                  <h2 class="text-primaryGrey text-[13px]">Consumable</h2>
                  <div class="flex gap-3 items-center text-[13px]">
                    <img height="" width="" src="/assets/reminder-clock.svg" alt="" />
                    <h1>9:30 AM</h1>
                  </div>
                </div>
              </div>
            </div>

            <div class="flex gap-3 items-center">
              <!-- <h1 class="font-[600] text-xl">2 🌻</h1> -->

              <img height="" width="" src="/assets/right-arrow.svg" class="w-[18px]" alt="" />
            </div>
          </div>

          <div class="border"></div>
        </div>
      </div>
    </main>

    <script src="script.js"></script>
  </body>
</html>
